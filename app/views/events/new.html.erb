<%= render "header" %>
<div class="main-box">
  <h3 class="event-title">イベント登録</h3>
  <div class="event-new-box">
    <%= form_for @event,id:"event-new-form", local: true do |f| %>
      <%= render "share/error_messages", model: f.object %>
      <div class="event">
        <div class="event-name">
          <p>イベント名(必須）</p>
          <%= f.text_field :name, class:"event-name-input"%>
        </div>
        <div class="event-description">
          <p>詳細（任意)</p>
          <%= f.text_area :description, class:"event-description-input" %>
        </div>
      </div>
      <div class="schedule-title">
        <h3>日程登録<span class="sub-information">(候補となる日付をカレンダーからクリックしてください)</span></h3>
      </div>
      <div class="schedule">
        <div id="select-days">
          <%= f.fields_for :schedules do |schedule_fields| %>
            <ul id="add-date-style">
              <li class = "date-input">
                <%= schedule_fields.date_field :savedate, class:"savedate-input" %>
              </li>
              <li class = "date-time"> 
                <%= schedule_fields.select :savetime, [
                  ["00:00~","0:00"], ["00:30~", "0:30"], 
                  ["01:00~", "1:00"],["01:30~", "1:30"],
                  ["02:00~", "2:00"],["02:30~", "2:30"],
                  ["03:00~", "3:00"],["03:30~", "3:30"],
                  ["04:00~", "4:00"],["04:30~", "4:30"],
                  ["05:00~", "5:00"],["05:30~", "5:30"],
                  ["06:00~", "6:00"],["06:30~", "6:30"],
                  ["07:00~", "7:00"],["07:30~", "7:30"],
                  ["08:00~", "8:00"],["08:30~", "8:30"],
                  ["09:00~", "9:00"],["09:30~", "9:30"],
                  ["10:00~", "10:00"],["10:30~", "10:30"],
                  ["11:00~", "11:00"],["11:30~", "11:30"],
                  ["12:00~", "12:00"],["12:30~", "12:30"],
                  ["13:00~", "13:00"],["13:30~", "13:30"],
                  ["14:00~", "14:00"],["14:30~", "14:30"],
                  ["15:00~", "15:00"],["15:30~", "15:30"],
                  ["16:00~", "16:00"],["16:30~", "16:30"],
                  ["17:00~", "17:00"],["17:30~", "17:30"],
                  ["18:00~", "18:00"],["18:30~", "18:30"],
                  ["19:00~", "19:00"],["19:30~", "19:30"],
                  ["20:00~", "20:00"],["20:30~", "20:30"],
                  ["21:00~", "21:00"],["21:30~", "21:30"],
                  ["22:00~", "22:00"],["22:30~", "22:30"],
                  ["23:00~", "23:00"],["23:30~", "23:30"],
                  ], 
                    {include_blank: "選択",selected:"19:00"}, class: "date-time-input" %>
              </li>
              <li id = "schedule-delete" >
                <p class="btn-flat-border-red">日程削除</p>
              </li>
            </ul>
          <% end %>
        </div>
        <div id="schdule-calender">
          <table id="days">
            <thead class="calender-thead">
              <tr>
                <th id="prev">&laquo;</th>
                <th id="title" colspan="5">2020/05</th>
                <th id="next">&raquo;</th>
              </tr> 
              <tr>
                <th>Sun</th>
                <th>Mon</th>
                <th>Tue</th>
                <th>Wed</th>
                <th>Thu</th>
                <th>Fri</th>
                <th>Sat</th>
              </tr>
            </thead>
            <tbody class="calender-tbody"> 
            </tbody>
            <tfoot>
              <tr>
                <td id="today" colspan="7">Today</td>
              </tr>
            </tfoot class="calender-tfoot">
          </table>
        </div>
      </div>
      <div class="store">
        <div class="store-title-box">
          <div class="store-title">
            <h2>お店登録</h2>
          </div>
          <div id="shop-add-btn">
            <%= link_to "お店追加", "#", class:"btn-flat-border" %>
          </div>
        </div>
        <%= f.fields_for :shops do |shop_fields| %>
          <div id="new-shop-top">
            <div id="new-shop">
              <div id="shop-name-box">
                <div id="shop-name"><p>店名(必須)</p></div>
                <%= shop_fields.text_field :shop_name, class:"shop-name-input"%>
              </div>
              <div id="shop-url-box">
                <div id="shop-url"><p>店のURL(任意)</p></div>
                <%= shop_fields.text_field :shop_url, class:"shop-url-input"%>
              </div>
              <div id="shop-map-box">
                <%# <div id="shop-map"><p>地図のURL(任意)</p></div> %>
                <%= shop_fields.hidden_field :map_url, class:"shop-map-input"%>
              </div>
              <div id="shop-comment-box">
                <div id="shop-comment"><p>コメント(任意)</p></div>
                <%= shop_fields.text_field :comment, class:"shop-comment-input"%>
              </div>
              <div id="shop-delete-box">
                <%= link_to "お店削除", "#", class:"btn-flat-border-red", id:"shop-delete" %>
              </div>
            </div>
          </div>
        <% end %>
      </div>
      <div class="submit-box">
        <%= f.submit "イベントの登録",class:"btn-flat-border-submit", id:"new-submit" %>
      </div>
    <% end %>
  </div>
</div>

<div id="create-calender">
  <span class="btn-modal-close" @click="close($event)"></span>
  
  <div class="calendar-title">
    <span class="btn-monthMove prev fa fa-angle-left" @click="movePrevMonth"></span>
    {{currentYear+"/"+currentMonth}}
    <span class="btn-monthMove next fa fa-angle-right" @click="moveNextMonth"></span>
  </div>

  <div class="calendar-body">
    <div class="calendar-body__item">
      <div v-for="day in weeks" class="day">{{day}}</div>
    </div>
    <div class="calendar-body__item">
      <div v-for="day in calendarMake" :value="day">
        <span :class="checkSelectedDay(day)">{{day}}</span>
      </div>
    </div>
  </div>
</div>